<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Murder Mystery Party HQ</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body data-view="player">
    <header class="app-header">
      <div class="header-inner">
        <h1>Murder Mystery Party HQ</h1>
        <p class="tagline">Choose your game, join your role, uncover the truth.</p>
      </div>
      <nav class="header-nav">
        <a href="/admin/" class="ghost-link">Host &amp; Admin Portal</a>
      </nav>
    </header>

    <main class="layout">
      <section class="card" id="games-overview">
        <div class="section-header">
          <h2>Available Games</h2>
          <button id="refresh-games" class="ghost-button">Refresh</button>
        </div>
        <p class="hint">
          Select a game to continue. You'll verify your identity with your secret PIN.
        </p>
        <div id="games-list" class="games-list"></div>
        <p id="no-games" class="muted">No active games yet. Ask your host to create one.</p>
      </section>

      <section class="card hidden" id="game-entry">
        <header class="game-entry__header">
          <div>
            <h2 id="selected-game-title"></h2>
            <p class="muted">
              Code: <span id="selected-game-code"></span>
              &bull;
              Status: <span id="selected-game-status"></span>
            </p>
            <p id="selected-game-phase" class="phase-pill"></p>
          </div>
          <button id="clear-selection" class="ghost-button">Choose another game</button>
        </header>

        <div class="stacked-form" id="player-selection">
          <label for="player-select">Who are you?</label>
          <select id="player-select">
            <option value="">Select your name</option>
          </select>
        </div>

        <form id="player-pin-form" class="stacked-form hidden">
          <label for="player-pin">Enter your PIN (or create one if this is your first login)</label>
          <input
            type="password"
            id="player-pin"
            maxlength="6"
            pattern="\d{4,6}"
            inputmode="numeric"
            required
          />
          <button type="submit" class="primary">Enter Player Dashboard</button>
        </form>

        <div id="add-player-section" class="add-player hidden">
          <button id="show-add-player" class="secondary">Add New Player</button>
          <form id="add-player-form" class="stacked-form hidden">
            <label for="new-player-name">New player name</label>
            <input type="text" id="new-player-name" maxlength="30" required />
            <button type="submit" class="primary">Create Player</button>
          </form>
          <p id="new-player-feedback" class="muted"></p>
        </div>
      </section>

      <section class="card hidden" id="player-dashboard">
        <header class="dashboard-header">
          <div>
            <p class="phase-pill" id="player-phase"></p>
            <h2 id="player-greeting"></h2>
            <p id="player-target" class="muted"></p>
          </div>
          <button id="logout" class="ghost-button">Log out</button>
        </header>

        <section class="section" data-phase="murders">
          <h3>Record a Murder</h3>
          <p class="hint">
            Eliminate your assigned target and log the deed so your victim can confirm what happened.
          </p>
          <form id="murder-form" class="stacked-form compact">
            <div class="form-group">
              <label>Target</label>
              <input type="text" id="murder-target" readonly />
            </div>
            <div class="form-group">
              <label for="murder-notes">Notes / Method</label>
              <textarea
                id="murder-notes"
                name="murderNotes"
                rows="3"
                placeholder="Describe how you eliminated your target"
              ></textarea>
            </div>
            <button type="submit" class="secondary">Submit Murder Report</button>
          </form>
        </section>

        <section class="section" data-phase="murders investigation">
          <h3>Confirm Murders Against You</h3>
          <p class="hint">Upload your evidence and identify who caught you before confirming.</p>
          <div id="confirmations" class="scroll-area"></div>
        </section>

        <section class="section" data-phase="investigation voting results">
          <h3>Investigation Timeline</h3>
          <p class="hint">Confirmed murders appear here in chronological order.</p>
          <div id="timeline" class="timeline"></div>
        </section>

        <section class="section" data-phase="voting results">
          <h3>Cast Your Vote</h3>
          <form id="vote-form" class="stacked-form compact">
            <label for="vote-select">Who is the real culprit?</label>
            <select id="vote-select" name="vote"></select>
            <button type="submit" class="secondary">Submit Vote</button>
          </form>
          <div id="vote-status" class="muted"></div>
        </section>

        <section class="section" data-phase="results">
          <h3>Final Results</h3>
          <div id="results-summary" class="scroll-area"></div>
        </section>
      </section>
    </main>

    <footer class="app-footer">
      <p>&copy; <span id="current-year"></span> Murder Mystery Party HQ. Plan responsibly!</p>
    </footer>

    <template id="game-card-template">
      <button class="game-card">
        <span class="game-card__name"></span>
        <span class="game-card__code"></span>
        <span class="game-card__status"></span>
      </button>
    </template>

    <template id="murder-card-template">
      <article class="murder-card">
        <div class="murder-card__meta">
          <strong class="murder-card__title"></strong>
          <span class="murder-card__timestamp"></span>
        </div>
        <p class="murder-card__notes"></p>
        <img class="murder-card__image" alt="Murder evidence" />
        <div class="murder-card__actions"></div>
      </article>
    </template>

    <script src="script.js"></script>
  </body>
</html>
